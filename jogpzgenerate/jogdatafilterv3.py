import re
import numpy as np


def parse_jointtargets(jog_data):
    """解析关节目标数据"""
    pattern = r'CONST jointtarget (\w+):=\[\[(.*?)\],\[(.*?)\]\]'
    matches = re.findall(pattern, jog_data)

    jointtargets = []
    for name, joints, extra in matches:
        # 解析关节值
        joint_values = [float(x.strip()) for x in joints.split(',')]
        # 解析额外值
        extra_values = [float(x.strip()) for x in extra.split(',')]
        jointtargets.append({
            'name': name,
            'joints': joint_values,
            'extra': extra_values
        })

    return jointtargets


def filter_jointtargets(jointtargets, threshold=20):
    """筛选关节目标数据"""
    if not jointtargets:
        return []

    # 总是保留第一个数据点
    filtered = [jointtargets[0]]

    for i in range(1, len(jointtargets)):
        current = jointtargets[i]
        last_kept = filtered[-1]

        # 计算4、5、6轴的绝对差值
        diff_4 = abs(current['joints'][3] - last_kept['joints'][3])
        diff_5 = abs(current['joints'][4] - last_kept['joints'][4])
        diff_6 = abs(current['joints'][5] - last_kept['joints'][5])

        # 如果任一差值大于等于阈值，则保留该数据点
        if diff_4 >= threshold or diff_5 >= threshold or diff_6 >= threshold:
            filtered.append(current)

    return filtered


def format_jointtargets(jointtargets):
    """格式化关节目标数据为RAPID代码，并重新编号"""
    lines = []
    for idx, jt in enumerate(jointtargets, 1):
        joints_str = ','.join([f"{x:.4f}" for x in jt['joints']])
        extra_str = ','.join([str(int(x)) if x.is_integer() else f"{x:.1f}" for x in jt['extra']])
        lines.append(f"CONST jointtarget JT_Set1_{idx}:=[[{joints_str}],[{extra_str}]];")
    return '\n'.join(lines)


# 输入数据
data = """CONST jointtarget JT_Set8_1:=[[17.2345,36.9155,5.7601,-29.4560,-38.4440,-57.5650],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_2:=[[33.2772,38.2525,2.7076,-3.4830,-33.3510,-76.3010],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_3:=[[-35.0862,27.7088,3.8284,-86.2500,-69.2290,-19.8380],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_4:=[[24.8833,14.6737,6.2646,-38.4240,-16.6000,-43.0850],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_5:=[[-48.6620,4.3409,25.4786,-93.6620,-80.8940,-18.0610],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_6:=[[26.8563,3.9694,20.4883,-26.7440,-18.5950,-54.5310],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_7:=[[-30.9070,21.7815,13.6963,-82.1840,-66.1610,-24.4660],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_8:=[[-40.6171,17.2588,23.2637,-86.6370,-74.2670,-28.9860],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_9:=[[-23.4099,37.8805,6.2393,-72.6660,-62.4100,-35.2210],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_10:=[[-33.5239,20.2384,-1.9893,-90.8700,-67.4750,-5.5680],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_11:=[[21.4414,28.3794,10.4104,-25.2150,-33.5120,-59.3700],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_12:=[[33.6354,37.5681,-1.0156,-3.2200,-28.9450,-76.3320],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_13:=[[25.6936,19.4424,6.1370,-28.5070,-20.0760,-53.1910],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_14:=[[20.9538,21.4926,16.8319,-26.4290,-33.2530,-58.3140],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_15:=[[19.5727,27.7489,22.0781,-22.5430,-44.1700,-64.4920],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_16:=[[-30.0265,19.4221,21.4138,-79.2610,-66.3450,-30.3460],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_17:=[[-34.1825,15.9618,6.1164,-89.5430,-68.0620,-9.6920],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_18:=[[21.0137,21.5500,20.2225,-24.1720,-36.3730,-61.0100],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_19:=[[30.5416,7.3603,23.6991,-11.4430,-23.7880,-69.0700],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_20:=[[20.0776,19.5080,13.6761,-32.1100,-29.1360,-52.2890],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_21:=[[25.1051,2.7342,33.9620,-20.0010,-30.4560,-62.8820],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_22:=[[-41.9800,11.3182,17.1894,-90.7320,-75.1200,-16.4890],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_23:=[[-39.3266,32.6687,11.1924,-84.7870,-73.5760,-32.5420],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_24:=[[20.3393,7.2564,13.0131,-50.9140,-19.1420,-31.6570],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_25:=[[21.2221,16.6587,31.3264,-20.9580,-42.0450,-64.9680],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_26:=[[-37.9589,5.3422,25.1290,-88.1400,-71.6490,-18.5880],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_27:=[[-42.2987,-0.5625,36.2109,-89.0110,-75.4110,-23.8800],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_28:=[[27.8035,2.0199,20.2155,-27.2040,-16.2110,-53.6700],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_29:=[[24.1757,38.6992,-4.0374,-23.1030,-28.8520,-59.9470],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_30:=[[-32.4055,38.4863,-3.0279,-83.1310,-67.3820,-24.2620],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_31:=[[22.0140,37.1653,-1.1350,-26.1830,-30.8290,-57.8430],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_32:=[[32.8869,11.2744,23.8203,-4.9400,-27.5120,-74.8740],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_33:=[[21.5338,17.9618,1.9903,-49.0360,-18.0580,-33.2100],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_34:=[[-32.8628,12.6621,24.2718,-82.8160,-67.9190,-25.8080],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_35:=[[33.2006,35.4674,2.2239,-3.8830,-30.1050,-75.8540],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_36:=[[32.6421,3.4168,41.7621,-4.1420,-37.5810,-76.0000],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_37:=[[19.0625,20.1618,0.3213,-52.9410,-20.2010,-29.9780],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_38:=[[-49.5358,18.2910,34.8172,-90.4380,-80.7210,-41.6620],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_39:=[[31.1294,-16.8979,35.9843,-19.5460,-12.0690,-60.3320],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_40:=[[23.4845,-7.0065,20.5818,-63.9500,-12.9400,-17.1660],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_41:=[[-26.9061,38.6018,-5.9527,-81.0520,-62.4840,-21.9020],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_42:=[[21.1398,34.2018,6.0348,-24.8030,-34.9010,-60.0990],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_43:=[[-23.9001,28.2888,0.8810,-81.2050,-59.3950,-18.4090],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_44:=[[-30.5940,3.5105,14.5341,-90.0540,-64.6740,-5.3190],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_45:=[[29.1816,-1.8748,26.4158,-19.8640,-17.8380,-60.7750],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_46:=[[27.3104,39.7087,-0.1639,-14.5990,-32.6740,-67.6320],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_47:=[[-50.4714,8.1568,23.2729,-94.3250,-82.3440,-19.7960],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_48:=[[-31.2787,12.2582,13.4277,-86.7630,-65.5280,-13.7440],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_49:=[[-40.0934,20.9231,19.2305,-86.4040,-73.8450,-28.6240],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_50:=[[29.6566,18.3194,20.9301,-10.3980,-31.9740,-70.8500],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_51:=[[33.6668,22.7108,29.7081,-2.1380,-44.7860,-77.6170],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_52:=[[23.8861,29.4432,8.6041,-21.4920,-32.0640,-62.0210],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_53:=[[-36.2949,-2.4041,26.0198,-89.7680,-70.0300,-11.3520],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_54:=[[31.9003,19.6746,18.2275,-6.5010,-30.3930,-73.7700],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_55:=[[57.1633,29.2384,2.3079,-314.7220,-31.4660,-116.6050],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_56:=[[-39.1214,22.2313,28.1996,-82.7650,-74.1370,-39.3300],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_57:=[[-35.5890,35.8440,3.5975,-83.6450,-70.3520,-28.2080],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_58:=[[-33.6974,15.0510,7.4051,-89.2000,-67.6110,-10.1080],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_59:=[[-36.9331,22.8284,25.9747,-81.4880,-72.5110,-37.8640],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_60:=[[54.6935,12.5052,8.1179,-301.6430,-22.9050,-132.4400],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_61:=[[-33.6376,20.3493,16.3983,-83.3870,-68.5320,-25.5150],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_62:=[[23.4581,16.0903,27.5088,-19.3470,-37.3820,-64.9380],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_63:=[[29.5810,22.8253,16.4047,-10.5040,-31.9690,-70.7540],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_64:=[[-22.9900,49.3191,-13.3375,-76.7100,-59.9540,-26.3350],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_65:=[[19.6638,19.8211,0.1437,-52.8510,-19.4130,-29.8480],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_66:=[[28.9183,13.7249,24.3754,-12.1280,-30.9580,-69.3360],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_67:=[[-42.0959,4.7822,26.2938,-90.0940,-75.2080,-19.1550],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_68:=[[-38.6696,14.4202,4.3256,-92.2640,-72.3260,-6.2500],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_69:=[[28.1514,10.3758,5.7276,-39.9340,-10.8890,-40.4630],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_70:=[[25.0606,18.4371,-1.2318,-47.2750,-13.7610,-33.8670],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_71:=[[34.0855,37.9167,5.3155,-1.8890,-35.5980,-77.5400],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_72:=[[-42.8603,12.1991,38.0949,-85.7230,-76.4940,-38.9460],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_73:=[[25.1926,33.1897,10.7405,-16.5170,-37.3220,-67.0190],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_74:=[[33.4000,23.1790,-0.8208,-6.9000,-14.7760,-72.5040],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_75:=[[28.1112,19.7731,3.3542,-24.8840,-16.9110,-55.9710],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_76:=[[19.2220,9.6192,5.2604,-67.0280,-17.2290,-15.0630],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_77:=[[20.6717,16.4717,11.9936,-36.1470,-24.9240,-47.3910],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_78:=[[-38.2967,18.3872,10.5328,-88.8170,-71.8900,-16.9550],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_79:=[[-44.5311,10.4900,28.3455,-89.5870,-77.2140,-27.1400],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_80:=[[-37.6428,17.5579,15.4902,-87.0970,-71.4560,-21.3170],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_81:=[[22.7418,22.9182,11.0535,-26.4270,-28.7120,-57.0850],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_82:=[[-34.9029,18.5169,9.9581,-87.3110,-68.8970,-16.5810],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_83:=[[-32.4495,4.2904,10.2599,-92.1500,-66.5170,-1.5180],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_84:=[[-36.1812,6.9537,19.2912,-88.7610,-69.9520,-14.1560],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_85:=[[-29.0924,30.9610,-2.1924,-84.2510,-63.8570,-17.3030],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_86:=[[30.1676,13.4569,13.7279,-14.5560,-20.1020,-65.9130],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_87:=[[34.1767,5.7512,26.8764,-2.3690,-24.9870,-76.9440],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_88:=[[33.6774,21.9249,4.1971,-4.7580,-18.5290,-74.6360],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_89:=[[18.4490,15.5686,10.5916,-43.7160,-24.4230,-40.2090],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_90:=[[31.1116,-4.4289,40.4123,-8.4460,-28.5700,-72.0520],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_91:=[[-35.4441,31.4935,-10.5112,-90.4190,-69.2600,-8.5550],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_92:=[[22.6384,37.6510,-5.6578,-28.2720,-26.9830,-55.0250],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_93:=[[-36.9548,13.8017,4.0894,-92.0430,-70.7510,-5.2820],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_94:=[[-41.1454,1.3365,34.6507,-88.2330,-74.4620,-24.2600],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_95:=[[-28.1434,29.4746,16.6956,-75.5200,-66.1520,-36.3720],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_96:=[[17.4260,44.4209,-5.1817,-31.4880,-35.3980,-54.8620],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_97:=[[-37.1602,23.6774,14.0488,-85.2670,-71.4020,-26.2430],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_98:=[[33.5724,-4.4203,38.1691,-3.5980,-26.1260,-75.9180],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_99:=[[19.4277,28.8174,12.4838,-26.9950,-36.4500,-58.8180],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_100:=[[31.5103,31.0438,6.4580,-7.3060,-30.0460,-73.1040],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_101:=[[-38.3788,-1.7731,27.9887,-89.7500,-71.9330,-14.0770],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_102:=[[-38.9890,-5.8704,32.0703,-90.0230,-72.4730,-14.0770],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_103:=[[-32.2700,37.9025,-13.6358,-87.8210,-66.3430,-12.1490],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_104:=[[-45.5910,4.7568,24.6355,-92.2660,-78.2580,-17.4760],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_105:=[[-36.7884,29.9699,2.0154,-86.9900,-70.6750,-20.2360],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_106:=[[29.1260,35.8435,-2.2061,-13.4780,-26.5830,-67.6480],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_107:=[[-25.5951,37.1821,-2.6032,-79.2210,-61.7300,-24.2590],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_108:=[[-39.5235,17.6573,16.5688,-87.7980,-73.0880,-22.4630],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_109:=[[31.8553,28.6331,-2.8909,-10.4330,-18.3590,-69.4760],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_110:=[[21.2592,10.7561,28.1356,-25.5220,-33.6520,-59.1580],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_111:=[[-26.7134,26.9997,2.2060,-82.7450,-61.8370,-18.0580],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_112:=[[16.6693,27.9960,9.0796,-34.3340,-33.8840,-51.9450],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_113:=[[20.5797,42.5456,-2.7970,-26.0610,-34.6690,-59.0170],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_114:=[[27.8227,-6.2017,36.5570,-18.4290,-23.7180,-62.9690],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_115:=[[26.1526,-2.2946,15.4339,-59.2720,-10.4360,-21.3120],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_116:=[[34.2286,41.9746,-8.6327,-2.2050,-25.7230,-77.0980],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_117:=[[16.1312,32.4588,8.4720,-32.2910,-37.3550,-54.9140],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_118:=[[31.8668,11.8835,22.7767,-7.1780,-27.1790,-73.0030],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_119:=[[-35.2768,28.9552,14.4121,-82.0470,-70.5900,-32.3650],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_120:=[[28.5023,-0.2670,24.5127,-22.2180,-17.7670,-58.5880],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_121:=[[30.5994,19.0664,26.8964,-7.3440,-38.5250,-73.7970],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_122:=[[32.2886,-2.5240,18.8834,-18.4660,-9.1400,-61.0850],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_123:=[[-34.7323,16.8944,12.2158,-86.9820,-68.7830,-17.2650],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_124:=[[-25.2092,19.4735,-0.6927,-87.9060,-59.6090,-6.2850],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_125:=[[24.8371,-11.9605,22.9840,-72.6820,-10.7390,-7.9500],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_126:=[[-23.4704,45.8245,-10.3749,-77.3350,-60.1990,-25.6380],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_127:=[[-38.7661,-12.3938,26.8379,-93.6560,-72.6490,-1.7530],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_128:=[[-41.5110,14.5976,31.2923,-85.8010,-75.2700,-34.4940],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_129:=[[31.1289,30.4140,4.3168,-8.7390,-27.3210,-71.6980],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_130:=[[-30.3394,29.3818,14.4722,-78.2290,-67.1740,-33.5260],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_131:=[[-32.1929,23.5771,27.9151,-76.7710,-70.0350,-41.2420],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_132:=[[-27.2466,22.0684,-2.6879,-88.2750,-61.5470,-6.8980],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_133:=[[22.2252,15.0427,0.3742,-60.0850,-14.8890,-21.4700],[0,9000000000.0,9000000000.0,0,0,0]];
CONST jointtarget JT_Set8_134:=[[-42.7129,2.3119,23.2016,-91.8140,-75.8410,-13.4300],[0,9000000000.0,9000000000.0,0,0,0]];"""

# 解析数据
jointtargets = parse_jointtargets(data)

# 筛选数据
filtered = filter_jointtargets(jointtargets)

# 输出结果
print("筛选后的关节目标数据:")
formatted_output = format_jointtargets(filtered)
print(formatted_output)

# 输出统计信息
print(f"\n原始数据点数量: {len(jointtargets)}")
print(f"筛选后数据点数量: {len(filtered)}")
print(f"删除的数据点数量: {len(jointtargets) - len(filtered)}")

# 保存到文件
with open("final_output.txt", "w") as f:
    f.write(formatted_output)